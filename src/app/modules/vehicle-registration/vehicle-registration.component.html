<div class="container">
    <header>
        <h3 class="font-weight-600">{{ 'VehicleRegistration' | translate}}</h3>
        <div class="logo" (click)="navigateTo('/vehicleList')"><img src="../../../assets/images/olam cocoa.png"></div>
    </header>
    <div class="col-md-12">
        <div class="seasonSection">
            <div class="seasonLabel">
                <i class="fa fa-calendar" aria-hidden="true"></i>
                {{ 'VEHICLEREGISTRATION.PeriodDuration' | translate}}
                <select class="form-control inline-block" (change)="selectedSessonEvent($event)">
                    <option value="">{{ 'VEHICLEREGISTRATION.SelectSesson' | translate}}</option>
                    <option [selected] = "sesson.id == selectedSesson" *ngFor="let sesson of sessonList" [value] = "sesson.id">{{sesson.name}}</option>
                </select>
                <span class="inline-block">{{ 'VEHICLEREGISTRATION.DateRegistered' | translate}}</span>
                <input readonly type="text" name="fromDate" class="form-control inline-block form-control-input" [value]="formatedCurrentDate">
            </div>
        </div>
    </div>
    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
        <div class="col-md-12 vehicleSection">
            <div class="col-md-4">
                <div class="titleIcon"><img src="../../../assets/images/vendor-icon-outline.png" width="20"></div>
                <h4 class="font-weight-600 titleContent">{{ 'VEHICLEREGISTRATION.VENDOR.VendorDetails' | translate}}</h4>
                <div class="clearfix"></div>
                <hr>
                <div class="formLabel form-group">
                    <label>{{ 'VEHICLEREGISTRATION.VENDOR.VendorName' | translate}}</label>
                    <select class="form-control form-control-input" formControlName="vendorID"
                        [ngClass]="{ 'is-invalid': submitted && f.vendorID?.errors }">
                        <option value="">{{ 'VEHICLEREGISTRATION.VENDOR.SelectVendorName' | translate}}</option>
                        <option *ngFor="let vendor of vendorList" [value]="vendor.id">{{vendor.name}}</option>
                    </select>
                    <div class="invalid-feedback" *ngIf="submitted && !!f.vendorID.errors?.required">
                        <sup>*</sup>{{ 'VEHICLEREGISTRATION.VENDOR.Pleaseselectvendorname' | translate}}
                    </div>
                </div>
                <div class="formLabel form-group">
                    <label>{{ 'VEHICLEREGISTRATION.VENDOR.VendorContact' | translate}}</label>
                    <input formControlName="vendorContact" type="text" name="" class="form-control form-control-input"
                        [ngClass]="{ 'is-invalid': submitted && f.vendorContact?.errors }">
                    <div *ngIf="submitted && !!f.vendorContact?.errors" class="invalid-feedback">
                        <div *ngIf="!!f.vendorContact?.errors?.required"><sup>*</sup>{{ 'VEHICLEREGISTRATION.VENDOR.VendorContactisrequired' | translate}}</div>
                        <div *ngIf="!!f.vendorContact?.errors?.minlength"><sup>*</sup>{{ 'Minimumlengthrequired' | translate}}</div>
                    </div>
                </div>
                <div class="formLabel form-group">
                    <label>{{ 'VEHICLEREGISTRATION.VENDOR.vendorAddress' | translate}}</label>
                    <input formControlName="vendorAddress" type="text" name=""
                        class="form-control form-control-input"
                        [ngClass]="{ 'is-invalid': submitted && !!f.vendorAddress?.errors }">
                    <div *ngIf="submitted && !!f.vendorAddress?.errors" class="invalid-feedback">
                        <div *ngIf="!!f.vendorAddress?.errors.required"><sup>*</sup>{{ 'VEHICLEREGISTRATION.VENDOR.vendorAddressrequired' | translate}}</div>
                        <div *ngIf="!!f.vendorAddress?.errors?.minlength"><sup>*</sup>{{ 'Minimumlengthrequired' | translate}}
                        </div>
                    </div>
                </div>
                <div class="formLabel form-group">
                    <label>{{ 'VEHICLEREGISTRATION.VENDOR.transportOfficerName' | translate}}</label>
                    <input formControlName="transportOfficerName" type="text" name=""
                        class="form-control form-control-input"
                        [ngClass]="{ 'is-invalid': submitted && !!f.transportOfficerName?.errors }">
                    <div *ngIf="submitted && !!f.transportOfficerName?.errors" class="invalid-feedback">
                        <div *ngIf="!!f.transportOfficerName?.errors.required"><sup>*</sup>{{ 'VEHICLEREGISTRATION.VENDOR.transportOfficerNamerequired' | translate}}</div>
                        <div *ngIf="!!f.transportOfficerName?.errors?.minlength"><sup>*</sup>{{ 'Minimumlengthrequired' | translate}}
                        </div>
                    </div>
                </div>
                <div class="formLabel form-group">
                    <label>{{ 'VEHICLEREGISTRATION.VENDOR.transportOfficerContact' | translate}}</label>
                    <input formControlName="transportOfficerContact" type="text" name=""
                        class="form-control form-control-input"
                        [ngClass]="{ 'is-invalid': submitted && !!f.transportOfficerContact?.errors }">
                    <div *ngIf="submitted && !!f.transportOfficerContact?.errors" class="invalid-feedback">
                        <div *ngIf="!!f.transportOfficerContact?.errors.required"><sup>*</sup>{{ 'VEHICLEREGISTRATION.VENDOR.transportOfficerContactrequired' | translate}}</div>
                        <div *ngIf="!!f.transportOfficerContact?.errors?.minlength"><sup>*</sup>{{ 'Minimumlengthrequired' | translate}}
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-8 vehicleDetails">
                <div class="titleIcon"><img src="../../../assets/images/vehicle-icon-outline.png" width="47"></div>
                <h4 class="font-weight-600 titleContent">{{ 'VEHICLEREGISTRATION.VEHICLE.VehicleDetails' | translate}}</h4>
                <div class="clearfix"></div>
                <hr>
                <div class="col-md-6 ">
                    <div class="formLabel form-group">
                        <label>{{ 'VEHICLEREGISTRATION.VEHICLE.VehicleNumber' | translate}}</label>
                        <input formControlName="vehicleNumber" type="text" name=""
                            class="form-control form-control-input"
                            [ngClass]="{ 'is-invalid': submitted && !!f.vehicleNumber?.errors }">
                        <div *ngIf="submitted && !!f.vehicleNumber?.errors" class="invalid-feedback">
                            <div *ngIf="!!f.vehicleNumber?.errors.required"><sup>*</sup>{{ 'VEHICLEREGISTRATION.VEHICLE.VehicleNumberisrequired' | translate}}</div>
                            <div *ngIf="!!f.vehicleNumber?.errors?.minlength"><sup>*</sup>{{ 'Minimumlengthrequired' | translate}}</div>
                        </div>
                    </div>
                    <div class="formLabel form-group">
                        <label>{{ 'VEHICLEREGISTRATION.VEHICLE.ChassisNumber' | translate}}</label>
                        <input formControlName="chassisNumber" type="text" name=""
                            class="form-control form-control-input"
                            [ngClass]="{ 'is-invalid': submitted && !!f.chassisNumber?.errors }">
                        <div *ngIf="submitted && !!f.chassisNumber?.errors" class="invalid-feedback">
                            <div *ngIf="!!f.chassisNumber?.errors.required"><sup>*</sup>{{ 'VEHICLEREGISTRATION.VEHICLE.ChassisNumberisrequired' | translate}}</div>
                            <div *ngIf="!!f.chassisNumber?.errors?.minlength"><sup>*</sup>{{ 'Minimumlengthrequired' | translate}}</div>
                        </div>
                    </div>
                    <div class="formLabel form-group">
                        <label>{{ 'VEHICLEREGISTRATION.VEHICLE.TypeofVehicle' | translate}}</label>
                        <input formControlName="typeOfVehicle" type="text" name=""
                            class="form-control form-control-input"
                            [ngClass]="{ 'is-invalid': submitted && !!f.typeOfVehicle?.errors }">
                        <div *ngIf="submitted && !!f.typeOfVehicle?.errors" class="invalid-feedback">
                            <div *ngIf="!!f.typeOfVehicle?.errors.required"><sup>*</sup>{{ 'VEHICLEREGISTRATION.VEHICLE.TypeofVehicleisrequired' | translate}}
                            </div>
                            <div *ngIf="!!f.typeOfVehicle?.errors?.minlength"><sup>*</sup>{{ 'Minimumlengthrequired' | translate}}</div>
                        </div>
                    </div>
                    <div class="formLabel form-group">
                        <label>{{ 'VEHICLEREGISTRATION.VEHICLE.capacityOfVehicle' | translate}}</label>
                        <input formControlName="capacityOfVehicle" type="text" name=""
                            class="form-control form-control-input"
                            [ngClass]="{ 'is-invalid': submitted && !!f.capacityOfVehicle?.errors }">
                        <div *ngIf="submitted && !!f.capacityOfVehicle?.errors" class="invalid-feedback">
                            <div *ngIf="!!f.capacityOfVehicle?.errors.required"><sup>*</sup>{{ 'VEHICLEREGISTRATION.VEHICLE.capacityOfVehiclerequired' | translate}}
                            </div>
                            <div *ngIf="!!f.capacityOfVehicle?.errors?.minlength"><sup>*</sup>{{ 'Minimumlengthrequired' | translate}}</div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="formLabel form-group">
                        <label>{{ 'VEHICLEREGISTRATION.VEHICLE.InsuranceNumber' | translate}}</label>
                        <input formControlName="insuranceNumber" type="text" name=""
                            class="form-control form-control-input"
                            [ngClass]="{ 'is-invalid': submitted && !!f.insuranceNumber?.errors }">
                            
                            <div *ngIf="insuranceFile"><img src='../../../assets/images/attach-icon.png' width="20" class="attachIcon"><a [href]="insuranceDownloadUrl" target="_blank">{{insuranceFile?.name}}</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="removeButton" (click)="insuranceFile = null">{{ 'VEHICLEREGISTRATION.Remove' | translate}}</a></div>
                        <div class="invalid-feedback" *ngIf="submitted && !insuranceFile && !getStatusChecked">*{{ 'VEHICLEREGISTRATION.FileRequired' | translate}}</div>
                        <div *ngIf="submitted && !!f.insuranceNumber?.errors" class="invalid-feedback">
                            <div *ngIf="!!f.insuranceNumber?.errors.required"><sup>*</sup>{{ 'VEHICLEREGISTRATION.VEHICLE.InsuranceNumberisrequired' | translate}}
                            </div>
                            <div *ngIf="!!f.insuranceNumber?.errors?.minlength"><sup>*</sup>{{ 'Minimumlengthrequired' | translate}}
                            </div>
                        </div>
                    </div>
                    <div class="fileUploadIcon formLabel">
                            <label>&nbsp;</label>
                        <label for="insuranceFile">
                            <input (change)="fileSelected('insurance', $event)" style="display: none" type="file" name="" id="insuranceFile">
                            <img [src]="insuranceFile ? uplodDoneIcon : uploadIcon" width="40px" class="inline-block"></label>
                    </div>
                    <div class="formLabel form-group">
                        <label>{{ 'VEHICLEREGISTRATION.VEHICLE.RoadWorthyNumber' | translate}}</label>
                        <input formControlName="roadWorthyNumber" type="text" name=""
                            class="form-control form-control-input"
                            [ngClass]="{ 'is-invalid': submitted && !!f.roadWorthyNumber?.errors }">
                            
                            <div *ngIf="roadWorthyFile"><img src='../../../assets/images/attach-icon.png' width="20" class="attachIcon"><a [href]="roadWorthyDownloadUrl" target="_blank">{{roadWorthyFile?.name}}</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="removeButton" (click)="roadWorthyFile = null">{{ 'VEHICLEREGISTRATION.Remove' | translate}}</a></div>
                        <div class="invalid-feedback" *ngIf="submitted && !roadWorthyFile && !getStatusChecked">*{{ 'VEHICLEREGISTRATION.FileRequired' | translate}}</div>
                        <div *ngIf="submitted && !!f.roadWorthyNumber?.errors" class="invalid-feedback">
                            <div *ngIf="!!f.roadWorthyNumber?.errors.required"><sup>*</sup>{{ 'VEHICLEREGISTRATION.VEHICLE.RoadWorthyNumberisrequired' | translate}}</div>
                            <div *ngIf="!!f.roadWorthyNumber?.errors?.minlength"><sup>*</sup>{{ 'Minimumlengthrequired' | translate}}
                            </div>
                        </div>
                    </div>
                    <div class="fileUploadIcon formLabel">
                            <label>&nbsp;</label>
                            <label for="roadWorthyFile">
                            <input (change)="fileSelected('roadWorthy', $event)" style="display: none" type="file" name="" id="roadWorthyFile">
                            <img [src]="roadWorthyFile ? uplodDoneIcon : uploadIcon" width="40px" class="inline-block"></label>
                    </div>
                    <div class="formLabel form-group">
                        <label>{{ 'VEHICLEREGISTRATION.VEHICLE.FormCorFormA' | translate}}</label>
                        <input formControlName="formCorANumber" type="text" name=""
                            class="form-control form-control-input"
                            [ngClass]="{ 'is-invalid': submitted && !!f.formCorANumber?.errors }">
                            <div *ngIf="formCorFormAFile"><img src='../../../assets/images/attach-icon.png' width="20" class="attachIcon"><a [href]="formCorFormADownloadUrl" target="_blank">{{formCorFormAFile?.name}}</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="removeButton" (click)="formCorFormAFile = null">{{ 'VEHICLEREGISTRATION.Remove' | translate}}</a></div>
                        <div class="invalid-feedback" *ngIf="submitted && !formCorFormAFile && !getStatusChecked">*{{ 'VEHICLEREGISTRATION.FileRequired' | translate}}</div>
                        <div *ngIf="submitted && !!f.formCorANumber?.errors" class="invalid-feedback">
                            <div *ngIf="!!f.formCorANumber?.errors.required"><sup>*</sup>{{ 'VEHICLEREGISTRATION.VEHICLE.FormCorFormAisrequired' | translate}}
                            </div>
                            <div *ngIf="!!f.formCorANumber?.errors?.minlength"><sup>*</sup>{{ 'Minimumlengthrequired' | translate}}</div>
                        </div>
                    </div>
                    <div class="fileUploadIcon formLabel">
                        <label>&nbsp;</label>
                        <label for="formCorFormAFile">
                        <input (change)="fileSelected('formCorA', $event)" style="display: none" type="file" name="" id="formCorFormAFile">
                        <img [src]="formCorFormAFile ? uplodDoneIcon : uploadIcon" width="40px" class="inline-block"></label>
                    </div>    
                </div>
            </div>
            <div class="clearfix"></div>
            <div class="col-md-4">
                <div class="titleIcon"><img src="../../../assets/images/driver-icon-outline.png" width="23"></div>
                <h4 class="font-weight-600 titleContent">{{ 'VEHICLEREGISTRATION.DRIVER.DriverDetails' | translate}}</h4>
                <div class="clearfix"></div>
                <hr>
                <div class="formLabel form-group">
                    <label>{{ 'VEHICLEREGISTRATION.DRIVER.DriverName' | translate}} <span>{{ 'Optional' | translate}}</span></label>
                    <input formControlName="driverName" type="text" name="" class="form-control form-control-input"
                        [ngClass]="{ 'is-invalid': submitted && !!f.driverName?.errors }">
                    <div *ngIf="submitted && !!f.driverName?.errors" class="invalid-feedback">
                        <div *ngIf="!!f.driverName?.errors.required"><sup>*</sup>{{ 'VEHICLEREGISTRATION.DRIVER.DriverNameisrequired' | translate}}</div>
                        <div *ngIf="!!f.driverName?.errors?.minlength"><sup>*</sup>{{ 'Minimumlengthrequired' | translate}}</div>
                    </div>
                </div>
                <div class="formLabel form-group">
                    <label>{{ 'VEHICLEREGISTRATION.DRIVER.DriverContact' | translate}} <span>{{ 'Optional' | translate}}</span></label>
                    <input formControlName="driverContact" type="text" name="" class="form-control form-control-input"
                        [ngClass]="{ 'is-invalid': submitted && !!f.driverContact?.errors }">
                    <div *ngIf="submitted && !!f.driverContact?.errors" class="invalid-feedback">
                        <div *ngIf="!!f.driverContact?.errors.required"><sup>*</sup>{{ 'VEHICLEREGISTRATION.DRIVER.DriverName' | translate}}</div>
                        <div *ngIf="!!f.driverContact?.errors?.minlength"><sup>*</sup>{{ 'Minimumlengthrequired' | translate}}</div>
                    </div>
                </div>
                <div class="formLabel form-group">
                    <label>{{ 'VEHICLEREGISTRATION.DRIVER.LicenseNumber' | translate}} <span>{{ 'Optional' | translate}}</span></label>
                    <input formControlName="licenseNumber" type="text" name="" class="form-control form-control-input"
                        [ngClass]="{ 'is-invalid': submitted && !!f.licenseNumber?.errors }">
                        <div *ngIf="licenseFile"><img src='../../../assets/images/attach-icon.png' width="20" class="attachIcon"><a [href]="licenseDownloadUrl" target="_blank">{{licenseFile?.name}}</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="removeButton" (click)="licenseFile = null">{{ 'VEHICLEREGISTRATION.Remove' | translate}}</a></div>
                    <div *ngIf="submitted && !!f.licenseNumber?.errors" class="invalid-feedback">
                        <div *ngIf="!!f.licenseNumber?.errors.required"><sup>*</sup>{{ 'VEHICLEREGISTRATION.DRIVER.LicenseNumberisrequired' | translate}}</div>
                        <div *ngIf="!!f.licenseNumber?.errors?.minlength"><sup>*</sup>{{ 'Minimumlengthrequired' | translate}}</div>
                    </div>                    
                </div>
                <div class="fileUploadIcon formLabel">
                    <label>&nbsp;</label>
                    <label for="licenseFile">
                            <input (change)="fileSelected('license', $event)" style="display: none" type="file" name="" id="licenseFile">
                    <img [src]="licenseFile ? uplodDoneIcon : uploadIcon" width="40px" class="inline-block"></label>
                </div>
            </div>
            <div class="col-md-4">
                <div class="titleIcon"><img src="../../../assets/images/qrCode-icon.png" width="28"></div>
                <h4 class="font-weight-600 titleContent">{{ 'VEHICLEREGISTRATION.QRCODE.QRCode' | translate}}</h4>
                <div class="clearfix"></div>
                <hr>
                <div class="formLabel form-group">
                    <button name="" type="button" class="btn btn-primary scan-button" [ngClass]="{disable: !capturingDeviceFound}" (click)="openModal('qrScanner')"
                    [disabled]="!capturingDeviceFound">{{ 'VEHICLEREGISTRATION.QRCODE.Scan' | translate}}</button>
                    <span class="device-not-found" *ngIf="!capturingDeviceFound"><sup>*</sup>{{ 'VEHICLEREGISTRATION.QRCODE.Capturingdevicenotfound' | translate}}</span>
                    <div *ngIf="submitted && !qrCodeNumber && !getStatusChecked" class="invalid-feedback">
                            <div *ngIf="!qrCodeNumber && !getStatusChecked"><sup>*</sup>{{ 'VEHICLEREGISTRATION.QRCODE.QRCoderequired' | translate}}</div>
                    </div>    
                </div>
                <div *ngIf="scanSuccess">
                <div class="formLabel form-group">
                    <label>{{ 'VEHICLEREGISTRATION.QRCODE.QRNumber' | translate}}</label>
                    <input readonly type="text" name=""
                        class="form-control form-control-input" [value]= "qrCodeNumber"
                        [ngClass]="{ 'is-invalid': submitted && !qrCodeNumber }">
                </div>
                <div class="formLabel rescanLabel">
					<label><input type='checkbox' name="" (change)="reScanChanged($event)">{{ 'VEHICLEREGISTRATION.QRCODE.RescanQR' | translate}}</label>
                </div>
                <div class="formLabel rescanLabel" *ngIf="reScanChecked">
					<textarea rows="4" cols="50"></textarea>   
                        <button>{{ 'VEHICLEREGISTRATION.QRCODE.Send' | translate}}</button>                     
                </div>
            </div>
            </div>
            <div class="col-md-4 statusSection">
                <div class="titleIcon"><img src="../../../assets/images/status-icon.png" width="24"></div>
                <h4 class="font-weight-600 titleContent">{{ 'VEHICLEREGISTRATION.STATUS.Status' | translate}}</h4>
                <div class="clearfix"></div>
                <hr>
				<div class="formLabel">
                    <span [ngClass]="{disable: getStatusChecked}" class="inline-block">{{ 'VEHICLEREGISTRATION.STATUS.Unblock' | translate}}</span>
                    <label class="switch">
                        <input type="checkbox" [checked] = "!checkStatus" (change)="statusChangeEvent($event)">
                        <span class="slider round"></span>
                      </label>
                      <span [ngClass]="{disable: !getStatusChecked}" class="inline-block">{{ 'VEHICLEREGISTRATION.STATUS.Block' | translate}}</span>
				</div>
				
			</div>
        </div>
        <div class="vehicleFooter">
            <div class="pull-right form-group">
                <button class="btn btn-success">{{ 'Submit' | translate}}<span *ngIf="showLoader">...</span> </button>
            </div>
        </div>
    </form>
    <app-modal id="qrScanner">
        <div class="modal">
            <div class="modal-body">
                <h1 style="display: inline-block;">{{ 'VEHICLEREGISTRATION.QRCODE.QRScanner' | translate}}</h1>
                <h2 class="model-header-x" (click)="closeModal('qrScanner');">X</h2>
                <div class="scannerDiv">
                    <zxing-scanner [enable]="scannerEnabled" [(device)]="desiredDevice"
                        (camerasFound)="camerasFoundHandler($event)" (camerasNotFound)="camerasNotFoundHandler($event)"
                        (scanSuccess)="scanSuccessHandler($event)">
                    </zxing-scanner>
                </div>
                <div class="device-list">
                    <div *ngIf="deviceList?.length > 1" class="formLabel form-group">
                        <label>{{ 'VEHICLEREGISTRATION.QRCODE.CaptureDeviceList' | translate}}</label>
                        <select class="form-control form-control-input" (change)="selectedCamera($event)">
                            <option value="">{{ 'VEHICLEREGISTRATION.QRCODE.SelectaDevice' | translate}}</option>
                            <option [selected]="desiredDevice.deviceId === device.deviceId"
                                *ngFor="let device of deviceList" [value]="device.deviceId">{{device.label}}
                            </option>
                        </select>
                    </div> 
                </div>
            </div>
        </div>
        <div class="modal-background"></div>
    </app-modal>
</div>